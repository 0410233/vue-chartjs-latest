"use strict";(self["webpackChunkelife_env"]=self["webpackChunkelife_env"]||[]).push([[222,138],{8222:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"options cate-list-form"},[e("h4",{staticClass:"options__title"},[t._v(t._s(t.meta.label))]),e("el-form",{staticClass:"options__form",attrs:{model:t.formdata,rules:t.rules,size:"small","label-position":"top"}},[e("el-form-item",{attrs:{prop:"cateList",error:t.errorsmap.cateList,label:"商品分类："}},[e("draggable",t._b({staticClass:"cate-list",attrs:{tag:"div"},on:{input:t.handleCateListChange},model:{value:t.formdata.cateList,callback:function(e){t.$set(t.formdata,"cateList",e)},expression:"formdata.cateList"}},"draggable",t.dragOptions,!1),t._l(t.formdata.cateList,(function(a,s){return e("div",{key:a.id,staticClass:"cate"},[e("div",{staticClass:"cate__header"},[e("svg",{staticClass:"cate__drag",attrs:{viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}},[e("circle",{attrs:{cx:"15",cy:"12",r:"1.5"}}),e("circle",{attrs:{cx:"15",cy:"24",r:"1.5"}}),e("circle",{attrs:{cx:"21",cy:"12",r:"1.5"}}),e("circle",{attrs:{cx:"21",cy:"24",r:"1.5"}}),e("circle",{attrs:{cx:"21",cy:"18",r:"1.5"}}),e("circle",{attrs:{cx:"15",cy:"18",r:"1.5"}}),e("path",{attrs:{fill:"none",d:"M0 0h36v36H0z"}})]),e("span",{staticClass:"cate__name"},[t._v(t._s(a.name))]),e("el-button",{staticClass:"cate__change ml-auto",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.selectCate(s)}}},[t._v("修改")])],1),e("div",{staticClass:"cate__field field"},[e("label",{staticClass:"field__label",attrs:{for:""}},[t._v("显示数量")]),e("el-radio-group",{staticClass:"ml-auto",attrs:{size:"small"},on:{change:t.handleCateListChange},model:{value:a.showAll,callback:function(e){t.$set(a,"showAll",e)},expression:"cate.showAll"}},[e("el-radio-button",{attrs:{label:!1}},[t._v("指定数量")]),e("el-radio-button",{attrs:{label:!0}},[t._v("全部商品")])],1)],1),e("div",{staticClass:"cate__field field"},[e("label",{staticClass:"field__label",attrs:{for:""}},[t._v("指定数量")]),e("el-input-number",{staticClass:"ml-auto",attrs:{size:"small",min:1,max:100,disabled:a.showAll},model:{value:a.showCount,callback:function(e){t.$set(a,"showCount",e)},expression:"cate.showCount"}})],1),e("div",{staticClass:"cate__field field"},[e("label",{staticClass:"field__label",attrs:{for:""}},[t._v("菜单名称")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.name,expression:"cate.name"}],staticClass:"field__menu-input el-input__inner",attrs:{type:"text"},domProps:{value:a.name},on:{input:[function(e){e.target.composing||t.$set(a,"name",e.target.value)},t.handleCateListChange]}})]),e("CloseBtn",{staticClass:"cate__remove",on:{click:function(e){return t.removeCate(s)}}})],1)})),0),e("el-button",{staticClass:"add-cate w-full",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.selectCate(null)}}},[t._v("选择商品分类")])],1)],1),e("el-form",{staticClass:"options__form",attrs:{model:t.formdata,size:"small","label-position":"left","label-width":"80px"}},[e("el-form-item",{attrs:{label:"布局方式"}},[e("div",{staticClass:"flex items-center w-full"},[e("span",{staticClass:"el-form-item__value"},[t._v(t._s(t.layoutDisplay[t.formdata.layout]||""))]),e("el-radio-group",{staticClass:"ml-auto",attrs:{size:"small"},on:{change:function(e){return t.handleChange(e,"layout")}},model:{value:t.formdata.layout,callback:function(e){t.$set(t.formdata,"layout",e)},expression:"formdata.layout"}},[e("el-radio-button",{attrs:{label:"aside"}},[e("svg",{staticClass:"radio-button-icon",attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M153.6 153.6h307.2v716.8H153.6zm409.6 0h307.2v307.2H563.2zm0 409.6h307.2v307.2H563.2z",fill:"currentColor"}})])]),e("el-radio-button",{attrs:{label:"top"}},[e("svg",{staticClass:"radio-button-icon",attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M153.6 563.2h307.2v307.2H153.6zm0-409.6h716.8v307.2H153.6zm409.6 409.6h307.2v307.2H563.2z",fill:"currentColor"}})])])],1)],1)]),e("el-form-item",{attrs:{label:"商品名称"}},[e("div",{staticClass:"flex items-center w-full"},[e("span",{staticClass:"el-form-item__value"},[t._v(t._s(t.formdata.isShowName?"显示":"不显示"))]),e("el-switch",{staticClass:"ml-auto",on:{change:function(e){return t.handleChange(e,"isShowName")}},model:{value:t.formdata.isShowName,callback:function(e){t.$set(t.formdata,"isShowName",e)},expression:"formdata.isShowName"}})],1)]),e("el-form-item",{attrs:{label:"商品描述"}},[e("div",{staticClass:"flex items-center w-full"},[e("span",{staticClass:"el-form-item__value"},[t._v(t._s(t.formdata.isShowDesc?"显示":"不显示"))]),e("el-switch",{staticClass:"ml-auto",on:{change:function(e){return t.handleChange(e,"isShowDesc")}},model:{value:t.formdata.isShowDesc,callback:function(e){t.$set(t.formdata,"isShowDesc",e)},expression:"formdata.isShowDesc"}})],1)]),e("el-form-item",{attrs:{label:"商品价格"}},[e("div",{staticClass:"flex items-center w-full"},[e("span",{staticClass:"el-form-item__value"},[t._v(t._s(t.formdata.isShowPrice?"显示":"不显示"))]),e("el-switch",{staticClass:"ml-auto",on:{change:function(e){return t.handleChange(e,"isShowPrice")}},model:{value:t.formdata.isShowPrice,callback:function(e){t.$set(t.formdata,"isShowPrice",e)},expression:"formdata.isShowPrice"}})],1)])],1),e("CateSelect",{attrs:{visible:t.cateSelectorVisible},on:{"update:visible":function(e){t.cateSelectorVisible=e},change:t.onSelectCate}})],1)},l=[],i=(a(560),a(4806)),o=a.n(i),n=a(6983),r=a.n(n),c=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"选择商品分类",visible:t.dialogVisible,width:"800px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"records",attrs:{data:t.tableData,size:"mini"}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{prop:"name",label:"分类名","min-width":"120"}}),e("el-table-column",{attrs:{label:"选择",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.select(a.row)}}},[t._v("选择")])]}}])})],1)],1)},d=[],u={props:{visible:{type:Boolean,default:!1}},data(){return{dialogVisible:!1,loading:!1,tableData:[]}},watch:{visible:{handler(t){this.dialogVisible!==t&&(this.dialogVisible=t)},immediate:!0},dialogVisible(t){this.visible!==t&&this.$emit("update:visible",t)}},created(){this.getList()},methods:{foldCates(t){const e=t.reduce(((t,e)=>(e.children=[],t[e.id]=e,t)),{}),a=t.reduce(((t,a)=>{const s=e[a.pid];return s?s.children.push(a):t.push(a),t}),[]);return a},getList(){},select(t){this.$emit("change",o().cloneDeep(t)),this.dialogVisible=!1}}},m=u,f=a(1001),h=(0,f.Z)(m,c,d,!1,null,"716f8d83",null),p=h.exports,v=a(1736),b=a(3721),C=a(8138),_=(0,b.WN)(C,{components:{draggable:r(),CateSelect:p,CloseBtn:v.Z},data(){return{cateSelectorVisible:!1,dragOptions:{sort:!0,animation:150,handle:".cate__drag"},layoutDisplay:{aside:"左侧菜单",top:"顶部菜单"},currentIndex:null}},methods:{handleCateListChange(){this.handleChange(o().cloneDeep(this.formdata.cateList),"cateList")},selectCate(t){this.currentIndex=t,this.cateSelectorVisible=!0},onSelectCate(t){const e={id:t.id,name:t.name,showAll:!1,showCount:10,children:t.children.map((t=>t.id))};null!=this.currentIndex?this.formdata.cateList.splice(this.currentIndex,1,e):this.formdata.cateList.push(e),this.handleCateListChange()},removeCate(t){this.formdata.cateList.splice(t,1),this.handleCateListChange()}}}),g=_,w=(0,f.Z)(g,s,l,!1,null,"422b40e8",null),y=w.exports},8138:function(t,e,a){a.r(e),a.d(e,{getFormdata:function(){return i},getMeta:function(){return n},getProps:function(){return l},getRules:function(){return r},getWatchers:function(){return o}});var s=a(3721);function l(){return{cateList:{type:Array,default:()=>[]},layout:{type:String,default:"aside"},isShowName:{type:Boolean,default:!0},isShowDesc:{type:Boolean,default:!0},isShowPrice:{type:Boolean,default:!0}}}function i(){const t=(0,s.lN)(l());return t}function o(){const t=(0,s._6)(l());return t}function n(){return{name:"goods-category",label:"商品分类",cate:"basic",limit:100,data:i()}}function r(){return{cateList:{type:"array",required:!0,message:"请选择商品分类",defaultField:{type:"object",fields:{name:{type:"string",required:!0,message:"分类名称不能为空"}}}}}}}}]);
//# sourceMappingURL=222.0771a76d.js.map