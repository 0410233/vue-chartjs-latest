"use strict";(self["webpackChunkelife_env"]=self["webpackChunkelife_env"]||[]).push([[854,123],{8854:function(t,e,a){a.r(e),a.d(e,{default:function(){return Z}});var l=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"options navigation-form"},[e("h4",{staticClass:"options__title"},[t._v(t._s(t.meta.label))]),e("el-form",{staticClass:"options__form",attrs:{model:t.formdata,rules:t.rules,size:"small","label-position":"top"}},[e("el-form-item",{attrs:{error:t.errorsmap.links,label:"导航链接："}},[e("draggable",t._b({staticClass:"link-list",attrs:{tag:"div"},on:{input:t.handleLinksChange},model:{value:t.formdata.links,callback:function(e){t.$set(t.formdata,"links",e)},expression:"formdata.links"}},"draggable",t.dragOptions,!1),t._l(t.formdata.links,(function(a,l){return e("div",{key:l,staticClass:"link-item"},[e("div",{staticClass:"link-item__content"},[e("svg",{staticClass:"link-item__drag",attrs:{viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}},[e("circle",{attrs:{cx:"15",cy:"12",r:"1.5"}}),e("circle",{attrs:{cx:"15",cy:"24",r:"1.5"}}),e("circle",{attrs:{cx:"21",cy:"12",r:"1.5"}}),e("circle",{attrs:{cx:"21",cy:"24",r:"1.5"}}),e("circle",{attrs:{cx:"21",cy:"18",r:"1.5"}}),e("circle",{attrs:{cx:"15",cy:"18",r:"1.5"}}),e("path",{attrs:{fill:"none",d:"M0 0h36v36H0z"}})]),e("div",{staticClass:"link-item__image",class:a.image&&"is-chosen",on:{click:function(e){return t.chooseImage(l)}}},[a.image?e("img",{staticClass:"avatar",attrs:{src:a.image}}):[e("i",{staticClass:"el-icon el-icon-plus"}),e("span",[t._v("添加图片")])]],2),e("div",{staticClass:"link-item__name"},[e("div",{staticClass:"link-item__title"},[e("div",{staticClass:"link-item__label"},[t._v("标题")]),e("el-input",{staticClass:"link-item__title-input",attrs:{size:"mini"},model:{value:a.title,callback:function(e){t.$set(a,"title",e)},expression:"item.title"}})],1),e("div",{staticClass:"link-item__link"},[e("div",{staticClass:"link-item__label"},[t._v("链接")]),e("el-link",{staticClass:"link-item__linkto",attrs:{type:"primary"},on:{click:function(e){return t.selectLink(l)}}},[t._v(" "+t._s(a.linkto||"添加链接")+" ")])],1)])]),e("CloseBtn",{staticClass:"link-item__remove",attrs:{size:"18"},on:{click:function(e){return t.removeLink(l)}}})],1)})),0),t.formdata.links.length<10?e("el-button",{staticClass:"add-link w-full",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.addLink}},[t._v("添加图文导航")]):t._e(),e("p",{staticClass:"el-form-item__tips"},[t._v("最多添加 5 个导航，拖动选中的导航可对其排序")])],1)],1),e("el-form",{staticClass:"options__form",attrs:{model:t.formdata,rules:t.rules,size:"small","label-position":"left","label-width":"80px"},nativeOn:{submit:function(e){return e.preventDefault(),t.noop.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"导航样式"}},[e("div",{staticClass:"flex items-center w-full"},[e("el-radio-group",{staticClass:"ml-auto",attrs:{size:"small"},on:{change:function(e){return t.handleChange(e,"navStyle")}},model:{value:t.formdata.navStyle,callback:function(e){t.$set(t.formdata,"navStyle",e)},expression:"formdata.navStyle"}},[e("el-radio-button",{attrs:{label:"image"}},[t._v("图文导航")]),e("el-radio-button",{attrs:{label:"text"}},[t._v("文字导航")])],1)],1)]),e("el-form-item",{attrs:{label:"布局方式"}},[e("div",{staticClass:"flex items-center w-full"},[e("el-radio-group",{staticClass:"ml-auto",attrs:{size:"small"},on:{change:function(e){return t.handleChange(e,"layout")}},model:{value:t.formdata.layout,callback:function(e){t.$set(t.formdata,"layout",e)},expression:"formdata.layout"}},[e("el-radio-button",{attrs:{label:"wrap"}},[t._v("换行显示")]),e("el-radio-button",{attrs:{label:"scroll"}},[t._v("横向滚动")])],1)],1)]),e("el-form-item",{attrs:{label:"wrap"===t.formdata.layout?"一行显示":"一屏显示"}},[e("div",{staticClass:"flex items-center w-full"},[e("el-select",{staticClass:"ml-auto",staticStyle:{width:"120px"},attrs:{size:"small"},on:{change:function(e){return t.handleChange(e,"groupCount")}},model:{value:t.formdata.groupCount,callback:function(e){t.$set(t.formdata,"groupCount",e)},expression:"formdata.groupCount"}},[e("el-option",{attrs:{value:1,label:"1个"}}),e("el-option",{attrs:{value:2,label:"2个"}}),e("el-option",{attrs:{value:3,label:"3个"}}),e("el-option",{attrs:{value:4,label:"4个"}}),e("el-option",{attrs:{value:5,label:"5个"}}),e("el-option",{attrs:{value:6,label:"6个"}})],1)],1)]),e("el-form-item",{attrs:{label:"背景颜色"}},[e("div",{staticClass:"flex items-center w-full"},[e("span",{staticClass:"el-form-item__value"},[t._v(t._s(t.formdata.backgroundColor))]),e("el-button",{staticClass:"ml-auto",attrs:{type:"text"},on:{click:function(e){return t.reset("backgroundColor")}}},[t._v("重置")]),e("el-color-picker",{staticClass:"ml-8px",attrs:{size:"small"},on:{change:function(e){return t.handleChange(e,"backgroundColor")}},model:{value:t.formdata.backgroundColor,callback:function(e){t.$set(t.formdata,"backgroundColor",e)},expression:"formdata.backgroundColor"}})],1)]),e("el-form-item",{attrs:{label:"文字颜色"}},[e("div",{staticClass:"flex items-center w-full"},[e("span",{staticClass:"el-form-item__value"},[t._v(t._s(t.formdata.fontColor))]),e("el-button",{staticClass:"ml-auto",attrs:{type:"text"},on:{click:function(e){return t.reset("fontColor")}}},[t._v("重置")]),e("el-color-picker",{staticClass:"ml-8px",attrs:{size:"small"},on:{change:function(e){return t.handleChange(e,"fontColor")}},model:{value:t.formdata.fontColor,callback:function(e){t.$set(t.formdata,"fontColor",e)},expression:"formdata.fontColor"}})],1)])],1),e("PathSelect",{attrs:{visible:t.linkSelectorVisible},on:{"update:visible":function(e){t.linkSelectorVisible=e},change:t.onLinkSelected}})],1)},i=[],n=(a(560),a(4806)),s=a.n(n),o=a(6983),r=a.n(o),c=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"跳转到",visible:t.dialogVisible,width:"800px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-tabs",{staticClass:"tabs",attrs:{"tab-position":"left"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[e("el-tab-pane",{attrs:{label:"页面",name:"page"}},[e("PageList",{on:{change:t.onSeleckPage}})],1),e("el-tab-pane",{attrs:{label:"商品",name:"goods"}},[e("GoodsList",{on:{change:t.onSelectGoods}})],1)],1)],1)},u=[],d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-list"},[e("el-form",{attrs:{inline:"",size:"small"},nativeOn:{submit:function(e){return e.preventDefault(),t.noop.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"商品名称："}},[e("el-input",{attrs:{placeholder:"输入页面名称",size:"small",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.searchData.keywords,callback:function(e){t.$set(t.searchData,"keywords",e)},expression:"searchData.keywords"}})],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"records",attrs:{data:t.tableData,size:"mini"}},[e("el-table-column",{attrs:{prop:"name",label:"页面名称","min-width":"120"}}),e("el-table-column",{attrs:{label:"是否可装修",width:"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.decoratable?"可装修":"不可装修"))])]}}])}),e("el-table-column",{attrs:{label:"选择",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.select(a.row)}}},[t._v("选择")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{layout:"total, prev, pager, next","page-size":t.pagination.limit,total:t.pagination.total,"current-page":t.pagination.page,"pager-count":5,background:"",small:""},on:{"current-change":t.onPageChange}})],1)],1)},m=[],p=a(1959),g={data(){return{loading:!1,tableData:[],pagination:{page:1,total:0,limit:6},searchData:{keywords:""}}},created(){this.getList()},methods:{getList(t){t>0&&(this.pagination.page=t);const{page:e,limit:a}=this.pagination,l=Object.assign({page:e,limit:a},this.searchData);this.loading=!0,(0,p.Wy)(l).then((t=>{this.loading=!1,this.tableData=t.list,this.pagination.total=t.total})).catch((t=>{this.loading=!1,console.warn(t)}))},onPageChange(t){this.getList(t)},search(){this.getList(1)},select(t){this.$emit("change",{...t})},noop(){}}},f=g,h=a(1001),b=(0,h.Z)(f,d,m,!1,null,"33c7d294",null),k=b.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"goods-list"},[e("div",[e("el-form",{attrs:{inline:"",size:"small"}},[e("el-form-item",{attrs:{label:"商品分类："}},[e("el-cascader",{attrs:{options:t.merProductClassify,props:t.cateProps,clearable:"",size:"small","append-to-body":!1},on:{change:t.search},model:{value:t.searchData.cateId,callback:function(e){t.$set(t.searchData,"cateId",e)},expression:"searchData.cateId"}})],1),e("el-form-item",{attrs:{label:"商品名称："}},[e("el-input",{attrs:{placeholder:"请输入商品名称",size:"small",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.searchData.keywords,callback:function(e){t.$set(t.searchData,"keywords",e)},expression:"searchData.keywords"}})],1)],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"records",attrs:{data:t.tableData,size:"mini"}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{label:"商品图",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.row.image,fit:"contain","preview-src-list":[t.row.image]}})]}}])}),e("el-table-column",{attrs:{prop:"name",label:"商品名称","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"text-ellipsis",attrs:{title:a.row.name}},[t._v(t._s(a.row.name))])]}}])}),e("el-table-column",{attrs:{prop:"merchantProductCategoryName",label:"商品分类","min-width":"120"}}),e("el-table-column",{attrs:{label:"选择",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.select(a.row)}}},[t._v("选择")])]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{layout:"total, prev, pager, next","page-size":t.pagination.limit,total:t.pagination.total,"current-page":t.pagination.page,"pager-count":5,background:"",small:""},on:{"current-change":t.onPageChange}})],1)],1)},C=[],_={data(){return{loading:!1,tableData:[],pagination:{page:1,total:0,limit:6},searchData:{cateId:null,keywords:null,type:"1"},cateProps:{children:"childList",label:"name",value:"id",multiple:!1,emitPath:!1}}},created(){this.getList()},methods:{getList(){},onPageChange(t){this.getList(t)},search(){this.getList(1)},select(t){this.$emit("change",{...t})}}},y=_,x=(0,h.Z)(y,v,C,!1,null,"61e5c4c8",null),w=x.exports,L={components:{PageList:k,GoodsList:w},props:{visible:{type:Boolean,default:!1}},data(){return{dialogVisible:!1,currentTab:"page"}},watch:{visible:{handler(t){this.dialogVisible!==t&&(this.dialogVisible=t)},immediate:!0},dialogVisible(t){this.visible!==t&&this.$emit("update:visible",t)}},methods:{onSeleckPage(t){this.$emit("change",{name:t.name,path:"/"+t.path,image:null,from:"页面"}),this.dialogVisible=!1},onSelectGoods(t){this.$emit("change",{name:t.name,path:"/pages/goods/goods_details/index?id="+t.id,image:t.image,from:"商品"}),this.dialogVisible=!1}}},S=L,z=(0,h.Z)(S,c,u,!1,null,null,null),D=z.exports,P=a(1736),$=a(3721),V=a(5123),I=(0,$.WN)(V,{components:{draggable:r(),PathSelect:D,CloseBtn:P.Z},data(){return{currentLinkIndex:null,linkSelectorVisible:!1,dragOptions:{sort:!0,animation:150,handle:".link-item__drag"}}},methods:{handleLinksChange(){this.handleChange(s().cloneDeep(this.formdata.links),"links")},addLink(){this.formdata.links.push({image:null,title:null,path:null,linkto:null}),this.handleLinksChange()},updateLink(t,e){const a=this.formdata.links[t];a&&(this.$set(this.formdata.links,t,Object.assign(a,e)),this.handleLinksChange())},chooseImage(t){this.$modalUpload((e=>{e.length&&this.updateLink(t,{image:e[0].sattDir})}),"1")},selectLink(t){this.currentLinkIndex=t,this.linkSelectorVisible=!0},onLinkSelected(t){const e=this.currentLinkIndex,a=this.formdata.links[e];if(a){const l={path:t.path,linkto:t.from+"："+t.name};a.title||(l.title=t.name),a.image||(l.image=t.image),this.updateLink(e,l)}else this.currentLinkIndex=null},removeLink(t){this.formdata.links.splice(t,1),this.handleLinksChange()}}}),O=I,N=(0,h.Z)(O,l,i,!1,null,"04b2680c",null),Z=N.exports},5123:function(t,e,a){a.r(e),a.d(e,{getFormdata:function(){return n},getMeta:function(){return o},getProps:function(){return i},getRules:function(){return r},getWatchers:function(){return s}});var l=a(3721);function i(){return{links:{type:Array,default:()=>[]},navStyle:{type:String,default:"image"},layout:{type:String,default:"wrap"},groupCount:{type:Number,default:4},backgroundColor:{type:String,default:"#ffffff"},fontColor:{type:String,default:"#333333"}}}function n(){const t=(0,l.lN)(i());return t}function s(){const t=(0,l._6)(i());return t}function o(){return{name:"navigation",label:"图文导航",cate:"basic",limit:100,data:n()}}function r(){return{links:{type:"array",required:!0,message:"请选择链接",defaultField:{type:"object",fields:{path:{type:"string",required:!0,message:"请选择链接"}}}}}}}}]);
//# sourceMappingURL=854.cbf46e38.js.map